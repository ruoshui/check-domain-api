{extend name="public/inc" /}

{block name='main'}
<div class="layui-tab layui-tab-card">

	<ul class="layui-tab-title">
		<li class="layui-this">
			<a href="{:url('admin/video/index')}"><i class="layui-icon layui-icon-list"></i> è§†é¢‘åˆ—è¡¨</a>
		</li>
		<li>
			<a href="{:url('admin/video/create')}"><i class="layui-icon layui-icon-add-1"></i> æ·»åŠ </a>
		</li>
	</ul>

	<div class="layui-tab-content" style="background: #FFFFFF;">

		<blockquote class="layui-elem-quote layui-quote-nm">
			<h2 style="color: #FF5722;">è…¾è®¯è¿‘æœŸç›‘ç®¡æ¯”è¾ƒä¸¥æ ¼ï¼Œæ ‡é¢˜ã€åˆ†äº«æ ‡é¢˜ã€åˆ†äº«æè¿°ï¼Œå°½é‡ä¸è¦æ¶‰åŠä½ä¿—ã€æš´åŠ›ã€è‰²æƒ…ç­‰è¿æ³•è¿è§„å†…å®¹ï¼Œå¦åˆ™å®¹æ˜“è¢«å°â—</h2>
			<h2 style="color: #1E9FFF;">æ¨å¹¿å‰ï¼Œæ ‡é¢˜ã€åˆ†äº«æ ‡é¢˜ã€åˆ†äº«æè¿°ï¼Œè¯·ä¿®æ”¹å¾—å¸å¼•äººä½†åˆä¸è¿æ³•è¿è§„â—</h2>
		</blockquote>

		<div class="layui-btn-group">
			<form class="layui-form" method="get">
				<button class="layui-btn layui-btn-primary" onclick="javascript:location.reload();"><i class="fa fa-refresh"></i> åˆ·æ–°å½“å‰é¡µé¢</button>
				<input type="text" name="so" autocomplete="off" value="{:input('param.so')}" placeholder="æœç´¢å…³é”®è¯" class="layui-btn layui-btn-primary">
				<button class="layui-btn layui-btn-primary"><i class="layui-icon layui-icon-search"></i>æœç´¢</button>
				<a class="layui-btn layui-btn-primary" href="{:url()}"><i class="layui-icon layui-icon-ok-circle"></i>æ˜¾ç¤ºå…¨éƒ¨</a>
			</form>
		</div>

		<table id="dataTable"></table>

		<script type="text/html" id="status">
			<input type="checkbox" name="status" lay-skin="switch" lay-text="å·²å¯ç”¨|å·²ç¦ç”¨" data-href="{:url('status')}?t=videos&id={{ d.id }}" lay-filter="switchStatus" value="{{ d.status }}" {{ d.status==1 ? 'checked' : '' }}>
		</script>

		<script type="text/html" id="img">
			<img onclick="showImg(this.src);" src="{{ d.img }}" style="max-width: 100%;" alt="">
		</script>

		<script type="text/html" id="rukou">
			<div class="layui-btn-group">

				<a class="layui-btn layui-btn-primary layui-btn-xs" href="http://{{d.domain}}/video/{{ d.id }}.html" target="_blank">
					<i class="layui-icon layui-icon-link"></i>æ‰“å¼€
				</a>

				<a class="layui-btn layui-btn-primary layui-btn-xs"
				   onclick="showImg('https://api.uomg.com/api/qrcode?url=http://{{d.domain}}/video/{{ d.id }}.html')">
					<i class="layui-icon layui-icon-chart"></i>äºŒç»´ç 
				</a>

				<a class="layui-btn layui-btn-primary layui-btn-xs"
				   onclick="layer.alert('http://{{d.domain}}/video/{{ d.id }}.html', {title: false,shade: 0.5,closeBtn: 1,shadeClose: true,anim: 3,btn:false});">
					<i class="layui-icon layui-icon-search"></i>ç½‘å€
				</a>

			</div>
		</script>

		<script type="text/html" id="barDemo">
			<div class="layui-btn-group">
				<a class="layui-btn layui-btn-primary layui-btn-xs" href="{:url('edit')}?id={{ d.id }}"><i class="layui-icon layui-icon-edit"></i>æ”¹</a>
				<a class="layui-btn layui-btn-primary layui-btn-xs" onclick="del('videos', {{ d.id }});"><i class="layui-icon layui-icon-delete"></i>åˆ </a>
			</div>
		</script>
	</div>
</div>
{/block}

{block name="js"}
<script>
	layui.use(['table', 'layer', 'form'], function() {
		var table = layui.table,
				layer = layui.layer,
				form = layui.form,
				$ = layui.jquery;

		table.render({
			elem: '#dataTable',
			url: "{:url()}?so={:trim(input('param.so'))}",
			title: 'æ•°æ®è¡¨',
			limit: 20,
			cols: [
				[
					{fixed:'left',	title:'æ“ä½œ',	width:120,	align:'center',	toolbar:'#barDemo'},
					{field:'status',title:'çŠ¶æ€',	width:110,	align:'center',	sort:true,	templet:'#status'},
					{field:'sort',	title:'æ’åº',	width:90,	align:'center',	sort:true},
					{field:'rukou',	title:'å…¥å£ç½‘å€',	width:210,	align:'center',	templet:'#rukou'},
					{field:'title',	title:'è§†é¢‘æ ‡é¢˜',	minWidth:200,	sort:true},
					{field:'img',	title:'å›¾ç‰‡',	width:120,	align:'center', templet:'#img'},
					{field:'miao',	title:'åœæ­¢ç§’',	width:100,	align:'center',	sort:true},
					{field:'view',	title:'è®¿é—®é‡',	width:100,	align:'center',	sort:true},
					{field:'dianzan',title:'ğŸ‘èµ',	width:90,	align:'center',	sort:true},
				{field:'create_time',	title:'åŠ å…¥æ—¶é—´',	width:180,	align:'center',	sort:true},
				]
			],
			page: true
		});
	});
</script>
{/block}